[What] Zynq --> 调试总结
==========================

## 配置 PS 

需要牢记于心的是： **zynq中PL与PS是可以单独配置的**，这句话的意义在于可以仅仅下载 PL 或者 PS 代码。

也就是说，当仅仅需要配置 PS 时，可以在 vivado 下通过图形界面配置 PS 模块。随后在同步和综合后便可以直接输出硬件描述文件，而**不需要编译 bit 文件**，这样会**大大节约调试时间**（当然，在输出硬件文件时，也不用选择导出 bit 文件选项）。

在生成的文件导入 SDK 后，可以查看 ps7\_init.html 文件来了解整个 PS 的配置概览和寄存器的具体配置值。

对应的初始化时钟、DDR、MIO代码具体实现是在 ps7\_init.c 和 ps7\_init.h 文件中来实现寄存器配置。（当然也可以通过直接修改 ps7\_init.c 的寄存器列表，但是没有 vivado 图形界面配置直观）。

### 配置 DDR

DDR 是跑 ssbl 和系统的基础，但 DDR 由于布线参数等等原因不是那么好配置。

比较好的解决步骤是：

1.  在 vivado 下将 DDR 时钟降低，这样会降低由于布线造成的误差。
2.  通过 JATG 下载 fsbl 配置 DDR ，然后再通过 JATG 下载例程 "DRAM test" 代码完成对整个 DDR 的读写测试。
3.  参考 "DRAM test" 测试结果修改 DDR 配置参数，直到配置正常。
4.  提升 DDR 时钟到理论时钟，对参数再次进行微调。
5.  在修改参数的过程中，要**注意截图保存**，因为参数会反复调。

相关参考 : [ddr基础知识](https://github.com/KcMeterCEC/explore/blob/master/%5BWhat%5D%E5%9F%BA%E7%A1%80%E7%A1%AC%E4%BB%B6--DDR%E7%9F%A5%E8%AF%86/document.md)
