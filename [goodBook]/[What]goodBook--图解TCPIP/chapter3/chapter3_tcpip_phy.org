#+TITLE: [What]图解TCPIP_物理层
#+DATE: <2018-07-28 六> 
#+TAGS: tcpip
#+LAYOUT: post
#+CATEGORIES: book,图解TCPIP(入门)
#+NAME: <book_图解TCPIP_chapter3_tcpip_phy.org>
#+OPTIONS: ^:nil
#+OPTIONS: ^:{}

全局了解tcpip后，先来了解物理层(此处的物理层代表OSI模型中的数据链路层和物理层)。
#+BEGIN_HTML
<!--more-->
#+END_HTML
* 物理层的作用
物理层的协议定义了通过通信媒介互连的设备之间传输的规范，这些设备之间有时也会通过交换机、网桥、中继器等中转数据。
- 通信媒介包括：双绞线、同轴线、光纤、电波、红外线等。
- 物理接口通过电压高低、光的亮灭、无线电信号强弱来传递0,1信息
- 数据链路层将信息以帧为单位进行传输

* 数据链路重要概念
** MAC 地址
MAC地址由6字节48位来组成，其格式如下(LSB模式发送):
| bit   | 意义                             |
|-------+----------------------------------|
| 0     | 0:单播地址 1:多播地址            |
| 1     | 0:全局地址 1:本地地址            |
| 2~23  | 由IEEE管理的厂商识别码，保证重复 |
| 24~47 | 厂商内部识别码，保证不重复       |

不论哪种数据链路网络(以太网、FDDI、ATM、无线、蓝牙等)，都不会有相同的MAC地址出现。
- 实际上只要不是同属于一个数据链路，MAC地址相同也不会出现问题
** 共享介质型网络
共享介质型网络: 多个设备共享一个通信介质的网络。设备之间使用同一个载波信道进行发送和接收，
基本上采用半双工通信方式，并有必要对介质进行访问控制。

共享介质型网络有两种介质访问控制方式:一种是争用方式，另一种是令牌传递方式。

*** 争用方式(Contention)
这种方法采用先到先得的方式占用信道发送数据，这种方式称为 CSMA/CD(carrier sense multiple access with collision detection).

其原理如下:
- 如果载波信道上没有数据流动，则任何站都可以发送数据。
- 检查是否会发生冲突，一旦发送冲突时放弃发送数据，同时立即释放载波信道。
- 放弃发送后，随机延时一段时间再重新争用介质，重新发送帧。
*** 令牌传递方式
令牌传递方式是沿着令牌环发送一种叫做"令牌"的特殊报文，只有获得令牌的站才能发送数据。
- 这样可以避免冲突，并且每个站都有通过平等循环获得令牌的机会
** 非共享介质网络
对介质采取专用，网络中的每个站直连交换机，由交换机负责转发数据帧，发送端与接收端不共享通信介质，
因此很多情况下采用全双工通信方式。



** 根据MAC地址转发
以太网交换机根据数据链路层中每个帧的目标MAC地址，决定从哪个网口发送数据，
这时所参考的、用以记录发送接口的表就叫做转发表(Forwarding Table)

这种转发表是由交换机的自学机制自动生成的:
- 通过记录当前发送方的MAC地址，就可以知道与发送方连接网口的对应关系
  + 最开始只知道源端口，不知道其他目标设备对应哪个网口，这种情况下就向那些未知的网口都发送该包
- 这样反复几次就可以知道每个网口连接的设备MAC地址是多少了，以后就可以以一一对应的方式转发数据了
  
随着接入的设备越多，转发表越大，检索的时间就越长。所以有必要将网络分为多个数据链路，分层管理，提高检索效率。
** 环路检测计数
** VLAN

