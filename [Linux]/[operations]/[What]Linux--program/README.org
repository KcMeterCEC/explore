* [What]linux --> program 
** Daemon Process(守护进程)
*** 基本概念
**** 什么是守护进程
守护进程开系统启动后就会一直运行, 直到系统关闭.并且这些进程不会占用终端.
**** 进程组,会话
在一个终端下运行的程序(进程)会共享同一个控制终端, 会话(session) 指的就是一个或多个进程组的集合.

一个进程都有它属于的进程组, 而进程组的ID号(GID), 也就是组长进程的ID号(PID).

*在控制终端退出后, 基于此终端的进程也会退出*.

从上面可以得出: 一个进程要摆脱一个控制终端, 需要脱离会话和进程组.对应的函数就是 =setsid()=

setsid()具有如下特性:
1. 当进程不是进程组组长时, 会新建一个会话, 否则返回错误.
2. 此进程组会成为会话的首进程, 同时此进程是进程组的组长.
3. 此进程将脱离控制终端
*** 编写
**** 编写步骤
基于上面的概念, 以及参考APUE, 可以得出编写守护进程的步骤为:
1. 调用 *umask* 设置新建文件的权限为0. 
2. 使用 *fork* 新建进程, 并且使父进程退出
3. 使用 *setsid* 脱离当前会话, 并建立与终端无关的会话
4. 将工作目录切换到根目录下
5. 关闭文件描述符
6. 再次使用 *fork* 创建一个子进程, 并退出父进程, 让当前进程不为组长.
7. 
