#+TITLE: [What] 正则表达式基本规则
#+DATE: <2018-06-29 五>
#+TAGS: regexp
#+LAYOUT: post
#+CATEGORIES: editer, regexp
#+NAME: <editer_regexp_overview.org>
#+OPTIONS: ^:nil 
#+OPTIONS: ^:{}

本文整理自教程: [[http://deerchao.net/tutorials/regex/regex.htm#mission][正则表达式30分钟入门]]

- 验证表达式的网站: [[https://regexr.com]]

如此强大而又反人类的工具，还是得记录一下，我已经反反复复记忆又遗忘很多次了......

说明：为了不与 orgmode 的表格格式有冲突，我将有些字符使用两个单引号扩了起来，实际使用时不需要输入！
#+BEGIN_HTML
<!--more-->
#+END_HTML
* 频繁使用的基本模式
- 精确查找一个单词或短语：在要查询的单词或前后使用 \b 进行分隔，以避免单词前后有其他字母
  + 查找单词 "hello" : \bhello\b
  + 查找短语 "hello world" : \bhello world\b
- 在 *同一行* 中匹配一个单词后面跟着另外一个单词 
  + 查找一行中先有 "hello" 然后在此单词后还有 "world" : \bhello\b.*\bworld\b
- 匹配固定位数的数字
  + 匹配含有6位数字的单词: \d{6}
  + 匹配6位纯数字单词 : \b\d{6}\b
- 匹配以固定字母开头的单词
  + 匹配以字母 v 开头的单词 : \bv\w*\b
- 匹配行首的单词: *需要设置Multiline属性*
  + 匹配行首具有单词 The 的行 : ^\bThe\b

- 通过在 =*,+,?= 限定符之后放置 =?= ，该表达式从“贪心”表达式转换为“非贪心”表达式或最小匹配
* 限定符
| 字符       | 描述                                                                             |
|------------+----------------------------------------------------------------------------------|
| '*'        | 匹配前面的子表达式0次或多次，等价于{0,}。 比如 "zo*" 匹配 "z","zo","zoo"....     |
| '+'        | 匹配前面的子表达式1次或多次，等价于{1,}。比如 "zo+" 匹配 "zo","zoo",...          |
| '?'        | 匹配前面的子表达式0次或1次，等价于{0,1}。比如 "do(es)?"匹配 "do","does"          |
| '{n}'      | n是一个非负整数，匹配确定n次，例如 "o{2}" 匹配 "food"                            |
| '{n,}'     | n是一个非负整数，匹配至少n次。例如 "o{2,}"匹配 "food","foood"...                 |
| '{n,m}'    | m,n非负整数，n<=m,匹配 n~m 次。 *逗号和数之间不能有空格* 例如 "o{1,3}"匹配1~3个o |
| 'x 竖线 y' | 匹配x或y。例如 "z竖线food" 匹配 "z" 或 "food"                                    |
| [xyz]      | 匹配包含的任意一个字符                                                           |
| [^xyz]     | 匹配不包含的字符                                                                 |
| [a-z]      | 匹配 'a' 到 'z' 的字符范围                                                       |
| [^a-z]     | 不匹配 'a' 到 'z' 的字符范围                                                     |
* 定位符
| 字符 | 描述                                                                                                                     |
|------+--------------------------------------------------------------------------------------------------------------------------|
| '^'  | 匹配输入字符串开始的位置。如果设置为 RegExp 对象的 Multiline 属性，还会与 =\n,\r= 之后的位置匹配                         |
| '$'  | 匹配收入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 =$= 也匹配 \n 或 \r。要匹配 '$' 字符本身，使用 =\$= |
| \b   | 匹配一个单词边界                                                                                                         |
| \B   | 非字边界匹配                                                                                                             |
| \d   | 匹配一个数字字符。等同于 =[0-9]=                                                                                         |
| \D   | 匹配一个非数字字符。等同于 =[^0-9]=                                                                                      |
| \w   | 匹配字母、数字、下划线。等同于 =[A-Za-z0-9_]=                                                                            |
| \w   | 匹配非字母、数字、下划线。等同于 =[^A-Za-z0-9_]=                                                                        |
| \xn  | 匹配n，其中n为16进制转义值                                                                                               |
| \num | 匹配数字 num,其中num是一个正整数                                                                                         |
| \n   | 标识一个8进制转义值或一个向后引用。如果 \n 之前至少 n 个获取的子表达式，则 n为向后引用                                   |
| \un  | 匹配n，其中n是一个用4个16进制数字标识的Unicode字符                                                                       |
* 特殊字符
| 特殊字符 | 描述                                                                                                                     |
|----------+--------------------------------------------------------------------------------------------------------------------------|
| '$'      | 匹配收入字符串的结尾位置。如果设置了 RegExp 对象的 Multline 属性，则 =$= 也匹配 \n 或 \r。要匹配 '$' 字符本身，使用 =\$= |
| '()'     | 标记一个子表达式的开始和结束位置。匹配字符使用 =\(,\)=                                                                   |
| '*'      | 匹配前面的子表达式0次或多次。匹配本身使用 =\*=                                                                           |
| '+'      | 匹配前面的子表达式1次或多次。匹配本身使用 =\+=                                                                           |
| '.'      | 匹配除换行符之外的任何单字符。匹配本身使用 =\.=                                                                          |
| '['      | 标记一个中括号表达式的开始。匹配本身使用 =\[=                                                                            |
| '?'      | 匹配前面的子表达式0次或1次，或指明一个非贪婪限定符。匹配本身使用 =\?=                                                    |
| '\'      | 将下一个字符转义为特殊字符。匹配本身使用 =\\=                                                                            |
| '{'      | 标记限定符表达式的开始。匹配本身使用 =\{=                                                                                |
| 竖线     | 指明两项之间的一个选择                                                                                                   |
* 非打印字符
| 字符  | 描述                                                                                                                                |
|-------+-------------------------------------------------------------------------------------------------------------------------------------|
| '\cx' | 匹配一个由 'x' 指明的控制字符。'x' 值为 A-Z或a-z之间，否则此语法无效（也就是当成普通字符来匹配了）， =\cM 匹配一个 Control-M或回车= |
| '\f'  | 匹配一个换页符号。等同于 =\cL 或 \x0c（16进制代表的ascii表值）=                                                                     |
| '\n'  | 匹配一个换行符。等同于 =\cJ 或 \x0a=                                                                                                |
| '\r'  | 匹配一个回车符。等同于 =\cM 或 \x0d=                                                                                                |
| '\s'  | 匹配任何空白的非打印字符，包括空格、指标、换页符等。等同于 =[\f\n\r\t\v]=                                                           |
| '\S'  | 匹配任何非空白的非打印字符。等价于 =[^\f\n\r\t\v]=                                                                                  |
| '\t'  | 匹配一个制表符。等同于 =\cl 或 \x09=                                                                                                |
| '\v'  | 匹配一个垂直制表符。等同于 =\cK 或 \x0b=                                                                                            |
* 联合应用
| 引用         | 描述                                                           |
|--------------+----------------------------------------------------------------|
| (?:pattern)  | 匹配 pattern 但不获取匹配结果                                  |
| (?=pattern)  | 正向肯定预查， 在任何匹配 pattern 的字符串开始出匹配查找字符串 |
| (?<=pattern) | 反向肯定预查                                                   |
| (?!pattern)  | 正向否定预查， 在任何不匹配pattern的字符串开始出匹配查找字符串 |
| (?<!pattern) | 反向否定预查                                                   |
* 运算符优先级
正则表达式从左往右进行计算，下表由高到低展示优先级顺序：
| 运算符                   | 描述           |
|--------------------------+----------------|
| '\'                      | 转义           |
| (),(?:),(?=),[]          | 圆括号和方括号 |
| *,+,?,{n},{n,},{n,m}     | 限定符         |
| ^,$,\任何元字符,任何字符 | 定位点和序列   |
| 竖线                     | 替换，或操作   |
